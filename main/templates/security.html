{% extends "layout3.html" %}

      <meta name="viewport" content="initial-scale=1, width=device-width">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


{% block body %}
<script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
      var csrftoken = '{{ csrf_token }}';
      email = '{{request.user.email}}'
</script>
<script src="/static/security.js"></script>
<center>
      <div style="display: none;" id="details">
            <h1><b>Update Details</b></h1>
            <small>Note: Changes to username and email will affect your Login credentials</small>

            <section class="u-clearfix u-section-1" id="sec-afdb">
                  <b id="message"></b>
                  <div class="u-clearfix u-sheet u-sheet-1">
                        <div class="u-form u-login-control u-form-1">
                              <div class="u-form-group u-form-name">
                                    <div>Username *</div>
                                    <input type="text" name="username" id="username" placeholder="Enter your Username" value="{{request.user.username}}" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white">
                              </div>
                              <div class="u-align-center u-form-group u-form-submit">
                                    <br><button onclick="update_details('username')" id='button' style="font-size: 60px; color: black; border: 0ch; margin-bottom: 2%; border-radius: 10px 10px 10px 10px;  width: 200px; height: 50px;">Update Username</button>
                              </div>
                              <div class="u-form-group u-form-name">
                                    <div>Email *</div>
                                    <input type="text" name="email" id="email" placeholder="Email" value="{{request.user.email}}" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white">
                              </div>
                              <div class="u-align-center u-form-group u-form-submit">
                                    <br><button onclick="update_details('email')" id='button' style="font-size: 60px; color: black; border: 0ch; margin-bottom: 2%; border-radius: 10px 10px 10px 10px;  width: 200px; height: 50px;">Update Email</button>
                              </div>
                              <div class="u-form-group u-form-password">
                                    <div>Password *</div>
                                    <input type="password" name="password" placeholder="Enter your Password" id="password" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white">
                              </div>
                              <div class="u-form-group u-form-password">
                                    <div>Confirm Password *</div>
                                    <input type="password" name="confirm_password" placeholder="Enter your Password" id="confirm_password" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white">
                              </div>
                              <div class="u-align-center u-form-group u-form-submit">
                                    <br><button onclick="update_details('password')" id='button' style="font-size: 60px; color: black; border: 0ch; margin-bottom: 2%; border-radius: 10px 10px 10px 10px;  width: 200px; height: 50px;">Update Password</button>
                              </div>
                        </div>
                  </div>
             </section>
      </div>
      <div id="verify" style="margin-top: 30px;">
            <h1><b>Enter Password to continue</b></h1>
            <b id="verify_message"></b>
            <section class="u-clearfix u-section-1" id="sec-afdb">
                  <div class="u-clearfix u-sheet u-sheet-1">
                        <div class="u-form u-login-control u-form-1">
                              <div class="u-form-group u-form-password">
                                    <div>Password *</div>
                                    <input type="password" name="password" placeholder="Enter your Password" id="verify_password" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white">
                              </div>
                              <br>
                              <div class="u-align-center u-form-group u-form-submit">
                                    <button onclick="verify_user()" id='button' style="font-size: 60px; color: black; border: 0ch; margin-bottom: 2%; border-radius: 10px 10px 10px 10px;  width: 200px; height: 50px;">Continue</button>
                              </div>
                              <a href="/forgot_password">Forgot Password?</a>
                        </div>
                  </div>
             </section>
      </div>
      <div id="verify_otp" style="margin-top: 30px; display: none;">
            <h1><b>Please check your email for a verification code</b></h1>
            <b id="otp_message"></b>
            <section class="u-clearfix u-section-1" id="sec-afdb">
                  <div class="u-clearfix u-sheet u-sheet-1">
                        <div class="u-form u-login-control u-form-1">
                              <div class="u-form-group u-form-password">
                                    <div>OTP *</div>
                                    <input type="text" placeholder="Enter your Password" id="otp" class="u-border-1 u-border-grey-30 u-input u-input-rectangle u-white">
                              </div>
                              <br>
                              <div class="u-align-center u-form-group u-form-submit">
                                    <button onclick="verify_otp()" id='button' style="font-size: 60px; color: black; border: 0ch; margin-bottom: 2%; border-radius: 10px 10px 10px 10px;  width: 200px; height: 50px;">Continue</button>
                              </div>
                        </div>
                  </div>
             </section>
      </div>
</center>
{% endblock %}